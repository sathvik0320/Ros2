<?xml version ="1.0"?>
<robot name="car" >

  <link name ="base_footprint">
  </link>

  <link name="base_link">
    <visual>
          <geometry>
                <box size="0.6 0.4 0.2" />
          </geometry>
          <origin xyz="0 0 0.1" rpy="0 0 0" /> 
          <material  name="White">
              <color rgba="1.0 1.0 1.0 1.0" />
          </material>
    </visual>

    <collision>
          <geometry>
                <box size="0.6 0.4 0.2" />
          </geometry>
    </collision>
    <inertial>
      <mass value ="1.0" />
      <origin xyz="0 0 0" rpy="0 0 0" />
      <inertia ixx="1.0" ixy = "0" ixz = "0" iyy="1.0" iyz = "0" izz="1.0" />
    </inertial>
  </link>

  <joint name="base_joint" type="fixed">
    <parent link ="base_footprint" />
    <child link = "base_link" />
  </joint>

  <gazebo reference = "base_link">
    <material>Gazebo/White</material>
  </gazebo>


  <link name ="wheel_r">
    <visual>
        <geometry>
           <cylinder length="0.05" radius="0.1" />
        </geometry>
        <origin xyz="0 0 0" rpy="1.57 0 0" />
        <material name="Black">
            <color rgba= "0 0 0 1.0" />
        </material>    
    </visual>
    <collision>
        <geometry>
           <cylinder length="0.05" radius="0.1" />
        </geometry>
    </collision>
    <inertial>
      <mass value ="1.0" />
      <origin xyz="0 0 0" rpy="0 0 0" />
      <inertia ixx="1.0" ixy = "0" ixz = "0" iyy="1.0" iyz = "0" izz="1.0" />
    </inertial>
  </link>
  <joint name="right_joint" type ="continuous" >
    <parent link="base_link" />
    <child link="wheel_r" />
    <axis xyz="0 0 0" />
    <origin xyz="-0.15 -0.225 0" rpy="0 0 0" />
  </joint>
  <gazebo reference="wheel_r">
     <mu1>0.2</mu1>
     <mu2>0.2</mu2>
     <material>Gazebo/Black</material>
  </gazebo>

  <link name="wheel_l">
    <visual>
        <geometry>
            <cylinder length="0.05" radius="0.1" />
        </geometry>
        <origin xyz="0 0 0" rpy= "1.57 0 0" />
        <material name="Black">
            <color rgba="0 0 0 1.0" />
        </material>
    </visual>

    <collision>
           <geometry>
              <cylinder radius="0.1" length="0.05" />
           </geometry>
    </collision>
    <inertial>
      <mass value ="1.0" />
      <origin xyz="0 0 0" rpy="0 0 0" />
      <inertia ixx="1.0" ixy = "0" ixz = "0" iyy="1.0" iyz = "0" izz="1.0" />
    </inertial>
  </link>

  <joint name="left_joint" type ="continuous" >
    <parent link ="base_link" />
    <child link="wheel_l" />
    <origin xyz="-0.15 0.225 0" rpy="0 0 0" />
    <axis xyz="0 1 0" />
  </joint>

  <gazebo reference="wheel_l" >
    <mu1>0.2</mu1>
    <mu2>0.2</mu2>
    <material>Gazebo/Black</material>
  </gazebo>

  <link name="caster_wheel">
    <visual>
        <geometry>
            <sphere radius="0.05" />
        </geometry>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <material name="Black">
             <color rgba="0 0 0 1.0" />
        </material>
    </visual>

    <collision>
        <geometry>
             <sphere radius="0.05" />
        </geometry>
    </collision>
    <inertial>
        <mass value="1.0" />
        <origin xyz="0 0 0" rpy="0 0 0" />
        <inertia ixx="1.0" ixy = "0" ixz = "0" iyy="1.0" iyz = "0" izz="1.0" /> 
    </inertial>
  </link>

  <joint name="caster_joint" type="fixed">
    <parent link="base_link" />
    <child link="caster_wheel" />
    <origin xyz="0.2 0 -0.05" rpy="0 0 0" />
  </joint>

  <gazebo reference="caster_wheel">
     <material>Gazebo/Black</material>
     <mu1>0.2</mu1>
     <mu2>0.2</mu2>
  </gazebo>

  <link name="lidar">
     <visual>
        <geometry>
            <cylinder length="0.05" radius="0.1" />
        </geometry>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <material name="Black" >
           <color rgba="0 0 0 1.0" />
        </material>
     </visual>
 
     <collision>
         <geometry>
            <cylinder length="0.05" radius="0.1" />
         </geometry>
     </collision>

     <inertial>
          <mass value ="1.0" />
          <origin xyz="0 0 0" rpy="0 0 0" />
          <inertia ixx="1.0" ixy = "0" ixz = "0" iyy="1.0" iyz = "0" izz="1.0" />
     </inertial>
  </link>
  <joint name="lidar_joint" type="fixed">
      <parent link="base_link" />
      <child link="lidar" />
      <origin xyz="0 0 0.225" rpy="0 0 0" />
      <axis xyz="0 0 0" /> 
  </joint>

  <gazebo reference="lidar">
    <sensor name="lidar" type="ray">
      <always_on>true</always_on>
      <visualize>true</visualize>
      <update_rate>5</update_rate>
      <ray>
        <scan>
           <horizontal>
              <samples>200</samples>
              <resolution>1.000</resolution>
              <min_angle>-3.14</min_angle>
              <max_angle>3.14</max_angle>
           </horizontal>
        </scan>
        <noise>
          <type>gaussian</type>
          <mean>0.0</mean>
          <stddev>0.01</stddev>
        </noise>
        <range>
          <min>0.09</min>
          <max>10.0</max>
          <resolution>0.015</resolution>
        </range>
      </ray>
      <plugin name="scan" filename="libgazebo_ros_ray_sensor.so" >
        <ros>
          <remapping>~/out:=scan</remapping>
        </ros>
        <output_type>sensor_msgs/LaserScan</output_type>
        <frame_name>lidar</frame_name>
     
      </plugin>
    </sensor>
  </gazebo>

  <gazebo reference="lidar">
    <material>Gazebo/Black</material>
  </gazebo>

</robot>

